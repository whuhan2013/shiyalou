<!DOCTYPE html>
<!-- saved from url=(0056)https://www.shiyanlou.com/courses/746/labs/2508/document -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style class="vjs-styles-defaults">
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid {
        padding-top: 56.25%
      }
    </style>
	
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="author" content="Lei Shi">
  <meta http-equiv="Cache-Control" content="o-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="csrf-token" content="1486875298##7a37fad5666c13ad934218d012dc25cce0a9689a">
	
		
        <title>人机对战初体验:四子棋游戏 - 实验楼</title>
		
	

    
    <meta content="实验楼是国内领先的IT技术实训平台，创新的实验驱动教学模式，以就业为导向，为IT相关专业的在校学生及从业者提供编程、运维、测试、云计算、大数据、数据库等全面的IT技术动手实践环境，提供Linux、Python、Java、C语言、Ruby、Android、IOS开发等热门课程。" name="description">
    <meta content="实验楼,IT培训,IT教育,编程,在线编程,Linux,Linux教程,Linux操作系统,Python,Python教程,Python基础教程,Java,Java编程,C语言,大数据,Node.js,Hadoop,PHP,Docker" name="keywords">
    
    <meta content="实验楼,琛石科技" name="author">

	<link rel="shortcut icon" href="https://static.shiyanlou.com/favicon.ico">
	<link rel="stylesheet" href="./人机对战初体验_四子棋游戏 - 实验楼_files/font-awesome.min.css">
    <link rel="stylesheet" href="./人机对战初体验_四子棋游戏 - 实验楼_files/bootstrap.min.css">
    <link rel="stylesheet" href="./人机对战初体验_四子棋游戏 - 实验楼_files/bootstrap-switch.min.css">
    <link rel="stylesheet" href="./人机对战初体验_四子棋游戏 - 实验楼_files/bootstrap-tour.min.css">
    <link rel="stylesheet" href="./人机对战初体验_四子棋游戏 - 实验楼_files/bootstrap-table.min.css">
    <link rel="stylesheet" href="./人机对战初体验_四子棋游戏 - 实验楼_files/katex.min.css">
    <link rel="stylesheet" href="./人机对战初体验_四子棋游戏 - 实验楼_files/video-js.min.css">
    <link rel="stylesheet" href="./人机对战初体验_四子棋游戏 - 实验楼_files/monokai-sublime.min.css">

	<link rel="stylesheet" href="./人机对战初体验_四子棋游戏 - 实验楼_files/styles.css">

	<style>
		@font-face {
			font-family: "lantingxihei";
			src: url("https://static.shiyanlou.com/fonts/FZLTCXHJW.TTF");
		}

        /* modal 模态框*/
        #invite-user .modal-body {
            overflow: hidden;
        }
		#invite-user .modal-body .form-label {
			margin-bottom: 16px;
			font-size:14px;
		}
		#invite-user .modal-body .form-invite {
			width: 80%;
			padding: 6px 12px;
			background-color: #eeeeee;
			border: 1px solid #cccccc;
			border-radius: 5px;
			float: left;
			margin-right: 10px;
		}
		#invite-user .modal-body .msg-modal-style {
			background-color: #7dd383;
			margin-top: 10px;
			padding: 6px 0;
			text-align: center;
			width: 100%;
		}
		#invite-user .modal-body .modal-flash {
			position: absolute;
			top: 53px;
			right: 74px;
			z-index: 999;
		}
		/* end modal */

        .en-footer {
            padding: 30px;
            text-align: center;
            font-size: 14px;
        }
    </style>
	
<style>
    #editor {
        width: 0;
		height: 0;
		margin: 0;
		padding: 0;
		border: none;
    }
    #preview {
        padding: 20px;
        background: #fff;
        border: solid 1px #eee;
    }
	#preview p,
	#preview li,
	#preview span,
	#preview div,
	#preview blockquote,
	#preview blockquote	p {
		font-size: 15px;
        font-weight: 100;
	}
	#preview blockquote p {
		line-height: 1.6em;
	}
    .mobile-alert {
        display: none;
        margin-top: 10px;
        font-size: 16px;
        text-align: center;
    }
    .breadcrumb {
        border-bottom: solid 1px #eee;
    }
    @media (max-width: 768px) {
        .mobile-alert {
            display: block;
        }
        #preview p,
        #preview li,
        #preview span,
        #preview div,
        #preview blockquote,
        #preview blockquote	p {
            font-weight: 500;
        }
    }
    .start-lab {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        padding: 10px 0;
        text-align: center;
        box-shadow: 0 2px 4px 2px #eee;
        background: #274a59;
        z-index: 100;
    }
    .start-lab span {
        position: relative;
        top: 4px;
        color: #fff;
        font-size: 16px;
    }
    .start-lab .btn {
        margin-left: 10px;
        padding: 6px 50px;
        background: #0c9;
        font-size: 18px;
        border-color: #0c9;
    }
    @media (max-width: 768px) {
        .start-lab .btn {
            margin-top: 10px;
        }
    }
    .course-warning {
        margin-top: 10px;
        text-align: center;
        font-size: 16px;
    }
    .course-warning a {
        padding: 6px 50px;
        font-size: 16px;
    }

    .info-panel {
        position: relative;
        top: 0;
        background: cornsilk;
    }
    .info-panel div {
        margin-bottom: 10px;
        font-size: 16px;
    }
    .info-panel .btn {
        margin-top: 10px;
        border-radius: 4px;
    }
    
    @media (max-width: 768px) {
        .side-btn {
            display: none;
        }
    }
</style>


	
    
<style id="ace_editor.css">.ace_editor {position: relative;overflow: hidden;font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;direction: ltr;text-align: left;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: '';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}
/*# sourceURL=ace/css/ace_editor.css */</style><style id="ace-tm">.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}
/*# sourceURL=ace/css/ace-tm */</style><style>    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }</style></head>

<body>
	
        
        
            






<nav class="navbar navbar-default navbar-fixed-top header">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#header-navbar-collapse" aria-expanded="false">
                <span class="sr-only">实验楼</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://www.shiyanlou.com/">
                <img src="./人机对战初体验_四子棋游戏 - 实验楼_files/logo_03.png">
            </a>
        </div>
        <div class="collapse navbar-collapse" id="header-navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="dropdown active">
                    <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">
                        课程
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="" href="https://www.shiyanlou.com/courses/">全部课程</a></li>
                        <li><a class="" href="https://www.shiyanlou.com/courses/?status=preview">即将上线</a></li>
                        <li><a class="" href="https://www.shiyanlou.com/developer">开发者</a></li>
                    </ul>
                </li>
                <li class="">
                    <a href="https://www.shiyanlou.com/paths/">路径</a>
                </li>
                <li class="">
                    <a href="https://www.shiyanlou.com/questions/">讨论区</a>
                </li>
                <li class=" bootcamp new-nav logo-1111">
                    <a href="https://www.shiyanlou.com/bootcamp/">训练营</a>
                    
                </li>
                <li class=" new-nav logo-1111">
                    <a href="https://www.shiyanlou.com/vip">会员</a>
                    
                </li>
                
					
					<li class=""><a href="https://www.shiyanlou.com/user/235723/">我的课程</a></li>
					
                
            </ul>

            
            <ul class="nav navbar-nav navbar-right user">
                
                <li class="dropdown">
                    <a href="https://www.shiyanlou.com/user/235723/" class="dropdown-toggle hidden-xs">
                        <img class="header-avatar" src="./人机对战初体验_四子棋游戏 - 实验楼_files/gravatarHA954FKT7YJW.jpg" data-toggle="tooltip" data-placement="bottom" data-trigger="manual" title="" data-template="&lt;div class=&quot;tooltip&quot; data-url=&quot;/user/235723/messages&quot; role=&quot;tooltip&quot;&gt;&lt;div class=&quot;tooltip-arrow&quot; style=&quot;border-bottom-color:#f66e6e;&quot;&gt;&lt;/div&gt;&lt;div class=&quot;tooltip-inner&quot; style=&quot;background:#f66e6e;&quot;&gt;&lt;/div&gt;&lt;/div&gt;" data-original-title="新消息">
                        
                        <span class="header-msg-count" style="display:none;"></span>
                        
    
    
    
    <div class="user-username ">
        <span class="username" href="/user/235723/" target="_blank">
            
                whuhan2013
            

        </span>
        <span class="user-level">L1</span>
    </div>

                        <span class="caret"></span>
                    </a>
					<a href="https://www.shiyanlou.com/courses/746/labs/2508/document#" class="dropdown-toggle visible-xs-block" data-toggle="dropdown">
                        <img class="header-avatar" src="./人机对战初体验_四子棋游戏 - 实验楼_files/gravatarHA954FKT7YJW.jpg">
                        
                        <span class="header-msg-count" style="display:none;"></span>
                        <span class="header-username">whuhan2013</span>
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="https://www.shiyanlou.com/user/235723/">主页</a></li>
                        <!-- <li><a href="/user/message">通知</a></li>-->
                        <li><a href="https://www.shiyanlou.com/user/message">
                            <span class="position-relative"><span class="header-msg-mark" style="display:none;"></span>通知</span>
                        </a></li>
                        <li><a href="https://www.shiyanlou.com/user/profile">设置</a></li>
                        <li rolw="separator" class="divider"></li>
                        <li><a href="https://www.shiyanlou.com/logout">退出</a></li>
                    </ul>
                </li>
            </ul>
            

            <form class="navbar-form navbar-right" action="https://www.shiyanlou.com/search" method="get" role="search">
                <div class="form-group">
                    <input type="text" class="form-control" name="search" autocomplete="off" placeholder="搜索 课程/问答">
                </div>
            </form>
        </div>
    </div>
</nav>




        
	



	
	

	


<div class="container layout layout-margin-top">
    
<ol class="breadcrumb">
    <li><a href="https://www.shiyanlou.com/courses/">全部课程</a></li>
    <li>
        <a href="https://www.shiyanlou.com/courses/746">人机对战初体验:Python基于Pygame实现四子棋游戏</a>
    </li>
    <li class="active">
        人机对战初体验:四子棋游戏
    </li>
</ol>

    <div class="row">
        <div class="col-md-9 layout-body">
            
<div class="mobile-alert alert alert-danger">在线实验，请到PC端体验</div>
<div id="preview" class="markdown-body"><h1 id="-">人机对战初体验—四子棋游戏</h1>
<p>继去年3月人机大战引发全球瞩目以来，围棋AI（人工智能）再度引发跨领域的关注：一个叫Master的围棋AI，几天时间，面对中日韩顶尖职业围棋选手，已取得60胜0败的恐怖战绩，展现出的围棋技艺已经到了人类理解不了的程度。这可以视为人工智能在围棋领域的一次“大征服”，而在此之外的意义则是，告诉了我们人工智能在征服一项领域或职业时，究竟速度有多快。理解这一点，对于人类，乃至每一个人，都非常重要。通过本实验的学习，可以对人机对战有初步了解。</p>
<h2 id="-">一、实验介绍</h2>
<h3 id="1-1-">1.1 实验内容</h3>
<p>实验利用Python模拟AI和玩家进行四子棋游戏，利用游戏实验Pygame库，为游戏提供界面和操作支持。AI算法借用蒙特卡洛搜索树思想。通过设置AI的难度系数，即AI所能考虑到的未来棋子的可能走向，从而选择出最佳的方案和玩家对抗。难度系数越大，AI搜索范围越广，它所能做出的决定越明智。</p>
<p>游戏最终效果截图：</p>
<p><img src="./人机对战初体验_四子棋游戏 - 实验楼_files/wm" alt="此处输入图片的描述"></p>
<h3 id="1-2-">1.2 实验知识点</h3>
<ul>
<li>Pygame的基础操作</li>
<li>蒙特卡洛搜索树</li>
</ul>
<h3 id="1-3-">1.3 实验环境</h3>
<ul>
<li>Python2.7</li>
<li>gedit</li>
</ul>
<h3 id="1-4-">1.4 适合人群</h3>
<p>本课程难度一般，属于初级课程，适合具有Python基础并对Pygame有所了解的用户学习。</p>
<h3 id="1-5-">1.5 代码获取</h3>
<p>你可以通过下面命令将代码下载到实验楼环境中，作为参照对比进行学习。</p>
<pre><code class="lang-bash hljs">$ wget http://labfile.oss.aliyuncs.com/courses/746/fourinrow.py
</code></pre>
<h2 id="-">二、四子棋游戏</h2>
<p>四子棋游戏是在7*6的格子中。轮流从格子最上方落下棋子。棋子会落在该列格子中最下面的空格子里。先将四个棋子连成一条线（水平直线，竖直直线，或倾斜直线）者获胜，游戏结束。</p>
<h2 id="-">三、项目文件结构</h2>
<p><img src="./人机对战初体验_四子棋游戏 - 实验楼_files/wm(1)" alt="此处输入图片的描述"></p>
<h2 id="-">四、实验步骤</h2>
<h3 id="4-1-">4.1 开发准备</h3>
<p>在Code目录下进行创建工程文件Fourinrow，在终端执行命令</p>
<pre><code class="hljs bash"><span class="hljs-built_in">cd</span> Code &amp;&amp; mkdir Fourinrow
</code></pre><p>下载本次实验所需的图片资源到Fourinrow文件下</p>
<pre><code class="lang-xml hljs">$ cd Fourinrow
$ wget http://labfile.oss.aliyuncs.com/courses/746/images.zip
$ unzip images.zip
</code></pre>
<p><img src="./人机对战初体验_四子棋游戏 - 实验楼_files/wm(2)" alt="此处输入图片的描述"></p>
<p>安装依赖包</p>
<pre><code class="lang-python hljs">$ sudo apt-get update
$ sudo apt-get install python-pygame
</code></pre>
<h3 id="4-2-">4.2 游戏流程</h3>
<p><img src="./人机对战初体验_四子棋游戏 - 实验楼_files/wm(3)" alt="此处输入图片的描述"></p>
<h3 id="4-3-">4.3 初始化变量</h3>
<p>用到的变量包括，棋盘的宽度，长度（可以修改，设计不同规格的棋盘），难度系数，棋子大小以及一些设计坐标变量的设定。</p>
<p>在<code>FourinRow.py</code> 文件中输入如下代码：</p>
<pre><code class="lang-python hljs"><span class="hljs-keyword">import</span> random, copy, sys, pygame
<span class="hljs-keyword">from</span> pygame.locals <span class="hljs-keyword">import</span> *

BOARDWIDTH = <span class="hljs-number">7</span>  <span class="hljs-comment"># 棋子盘的宽度栏数</span>
BOARDHEIGHT = <span class="hljs-number">6</span> <span class="hljs-comment"># 棋子盘的高度栏数</span>
<span class="hljs-keyword">assert</span> BOARDWIDTH &gt;= <span class="hljs-number">4</span> <span class="hljs-keyword">and</span> BOARDHEIGHT &gt;= <span class="hljs-number">4</span>, <span class="hljs-string">'Board must be at least 4x4.'</span>

<span class="hljs-comment">#python assert断言是声明其布尔值必须为真的判定，如果发生异常就说明表达示为假。</span>
<span class="hljs-comment">#可以理解assert断言语句为raise-if-not，用来测试表示式，其返回值为假，就会触发异常。</span>

DIFFICULTY = <span class="hljs-number">2</span> <span class="hljs-comment"># 难度系数，计算机能够考虑的移动级别</span>
               <span class="hljs-comment">#这里2表示，考虑对手走棋的7种可能性及如何应对对手的7种走法</span>

SPACESIZE = <span class="hljs-number">50</span> <span class="hljs-comment"># 棋子的大小</span>

FPS = <span class="hljs-number">30</span> <span class="hljs-comment"># 屏幕的更新频率，即30/s</span>
WINDOWWIDTH = <span class="hljs-number">640</span>  <span class="hljs-comment"># 游戏屏幕的宽度像素</span>
WINDOWHEIGHT = <span class="hljs-number">480</span> <span class="hljs-comment"># 游戏屏幕的高度像素</span>

XMARGIN = int((WINDOWWIDTH - BOARDWIDTH * SPACESIZE) / <span class="hljs-number">2</span>)<span class="hljs-comment">#X边缘坐标量，即格子栏的最左边</span>
YMARGIN = int((WINDOWHEIGHT - BOARDHEIGHT * SPACESIZE) / <span class="hljs-number">2</span>)<span class="hljs-comment">#Y边缘坐标量，即格子栏的最上边</span>
BRIGHTBLUE = (<span class="hljs-number">0</span>, <span class="hljs-number">50</span>, <span class="hljs-number">255</span>)<span class="hljs-comment">#蓝色</span>
WHITE = (<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>)<span class="hljs-comment">#白色</span>

BGCOLOR = BRIGHTBLUE
TEXTCOLOR = WHITE

RED = <span class="hljs-string">'red'</span>
BLACK = <span class="hljs-string">'black'</span>
EMPTY = <span class="hljs-keyword">None</span>
HUMAN = <span class="hljs-string">'human'</span>
COMPUTER = <span class="hljs-string">'computer'</span>
</code></pre>
<p>除此之外我们还需要定义一些pygame的全局变量。这些全局变量在之后的各个模块中会被多次调用。其中很多是存储载入图片的变量，准备工作有点长，请大家耐心一点哦。</p>
<pre><code class="lang-python hljs"><span class="hljs-comment">#初始化pygame的各个模块</span>
pygame.init()

<span class="hljs-comment">#初始化了一个Clock对象</span>
FPSCLOCK = pygame.time.Clock()

<span class="hljs-comment">#创建游戏窗口</span>
DISPLAYSURF = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))

<span class="hljs-comment">#游戏窗口标题</span>
pygame.display.set_caption(<span class="hljs-string">u'four in row'</span>)

<span class="hljs-comment">#Rect(left,top,width,height)用来定义位置和宽高</span>
REDPILERECT = pygame.Rect(int(SPACESIZE / <span class="hljs-number">2</span>), WINDOWHEIGHT - int(<span class="hljs-number">3</span> * SPACESIZE / <span class="hljs-number">2</span>), SPACESIZE, SPACESIZE)


<span class="hljs-comment">#这里创建的是窗口中左下角和右下角的棋子</span>
BLACKPILERECT = pygame.Rect(WINDOWWIDTH - int(<span class="hljs-number">3</span> * SPACESIZE / <span class="hljs-number">2</span>), WINDOWHEIGHT - int(<span class="hljs-number">3</span> * SPACESIZE / <span class="hljs-number">2</span>), SPACESIZE, SPACESIZE)

<span class="hljs-comment">#载入红色棋子图片</span>
REDTOKENIMG = pygame.image.load(<span class="hljs-string">'4row_red.png'</span>)

<span class="hljs-comment">#将红色棋子图片缩放为SPACESIZE</span>
REDTOKENIMG = pygame.transform.smoothscale(REDTOKENIMG, (SPACESIZE, SPACESIZE))

<span class="hljs-comment">#载入黑色棋子图片</span>
BLACKTOKENIMG = pygame.image.load(<span class="hljs-string">'4row_black.png'</span>)

<span class="hljs-comment">#将黑色棋子图片缩放为SPACESIZE</span>
BLACKTOKENIMG = pygame.transform.smoothscale(BLACKTOKENIMG, (SPACESIZE, SPACESIZE))

<span class="hljs-comment">#载入棋子面板图片</span>
BOARDIMG = pygame.image.load(<span class="hljs-string">'4row_board.png'</span>)

<span class="hljs-comment">#将棋子面板图片缩放为SPACESIZE</span>
BOARDIMG = pygame.transform.smoothscale(BOARDIMG, (SPACESIZE, SPACESIZE))

<span class="hljs-comment">#载入人胜利时图片</span>
HUMANWINNERIMG = pygame.image.load(<span class="hljs-string">'4row_humanwinner.png'</span>)

<span class="hljs-comment">#载入AI胜时图片</span>
COMPUTERWINNERIMG = pygame.image.load(<span class="hljs-string">'4row_computerwinner.png'</span>)

<span class="hljs-comment">#载入平局提示图片</span>
TIEWINNERIMG = pygame.image.load(<span class="hljs-string">'4row_tie.png'</span>)

<span class="hljs-comment">#返回一个Rect实例</span>
WINNERRECT = HUMANWINNERIMG.get_rect()

<span class="hljs-comment">#游戏窗口中间位置坐标</span>
WINNERRECT.center = (int(WINDOWWIDTH / <span class="hljs-number">2</span>), int(WINDOWHEIGHT / <span class="hljs-number">2</span>))

<span class="hljs-comment">#载入操作提示图片</span>
ARROWIMG = pygame.image.load(<span class="hljs-string">'4row_arrow.png'</span>)

<span class="hljs-comment">#返回一个Rect实例</span>
ARROWRECT = ARROWIMG.get_rect()

<span class="hljs-comment">#操作提示的左位置</span>
ARROWRECT.left = REDPILERECT.right + <span class="hljs-number">10</span> 

<span class="hljs-comment">#将操作提示与下方红色棋子实例在纵向对齐</span>
ARROWRECT.centery = REDPILERECT.centery
</code></pre>
<p>至此我们完成了前期的准备工作。</p>
<h3 id="4-4-">4.4 棋盘设计</h3>
<p>初始时，将棋盘二维列表清空，然后根据玩家和AI的走法将棋盘相应位置设定颜色。</p>
<pre><code class="lang-python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">drawBoard</span><span class="hljs-params">(board, extraToken=None)</span>:</span>
    <span class="hljs-comment">#DISPLAYSURF 是我们的界面，在初始化变量模块中有定义</span>
    DISPLAYSURF.fill(BGCOLOR)<span class="hljs-comment">#将游戏窗口背景色填充为蓝色</span>
    spaceRect = pygame.Rect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, SPACESIZE, SPACESIZE)<span class="hljs-comment">#创建Rect实例</span>
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(BOARDWIDTH):
        <span class="hljs-comment">#确定每一列中每一行中的格子的左上角的位置坐标</span>
        <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(BOARDHEIGHT):
            spaceRect.topleft = (XMARGIN + (x * SPACESIZE), YMARGIN + (y * SPACESIZE))

            <span class="hljs-comment">#x =0,y =0时，即第一列第一行的格子。</span>
            <span class="hljs-keyword">if</span> board[x][y] == RED:<span class="hljs-comment">#如果格子值为红色</span>
                <span class="hljs-comment">#则在在游戏窗口的spaceRect中画红色棋子</span>
                DISPLAYSURF.blit(REDTOKENIMG, spaceRect)
            <span class="hljs-keyword">elif</span> board[x][y] == BLACK: <span class="hljs-comment">#否则画黑色棋子</span>
                DISPLAYSURF.blit(BLACKTOKENIMG, spaceRect)

    <span class="hljs-comment"># extraToken 是包含了位置信息和颜色信息的变量</span>
    <span class="hljs-comment"># 用来显示指定的棋子</span>
    <span class="hljs-keyword">if</span> extraToken != <span class="hljs-keyword">None</span>:
        <span class="hljs-keyword">if</span> extraToken[<span class="hljs-string">'color'</span>] == RED:
            DISPLAYSURF.blit(REDTOKENIMG,(extraToken[<span class="hljs-string">'x'</span>],
            extraToken[<span class="hljs-string">'y'</span>], SPACESIZE, SPACESIZE))
        <span class="hljs-keyword">elif</span> extraToken[<span class="hljs-string">'color'</span>] == BLACK:
            DISPLAYSURF.blit(BLACKTOKENIMG, (extraToken[<span class="hljs-string">'x'</span>], extraToken[<span class="hljs-string">'y'</span>], SPACESIZE, SPACESIZE))

    <span class="hljs-comment"># 画棋子面板</span>
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(BOARDWIDTH):
        <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(BOARDHEIGHT):
            spaceRect.topleft = (XMARGIN + (x * SPACESIZE), YMARGIN + (y * SPACESIZE))
            DISPLAYSURF.blit(BOARDIMG, spaceRect)

    <span class="hljs-comment"># 画游戏窗口中左下角和右下角的棋子</span>
    DISPLAYSURF.blit(REDTOKENIMG, REDPILERECT) <span class="hljs-comment"># 左边的红色棋子</span>
    DISPLAYSURF.blit(BLACKTOKENIMG, BLACKPILERECT) <span class="hljs-comment"># 右边的黑色棋子</span>


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getNewBoard</span><span class="hljs-params">()</span>:</span>
    board = []
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(BOARDWIDTH):
        board.append([EMPTY] * BOARDHEIGHT)
    <span class="hljs-keyword">return</span> board <span class="hljs-comment">#返回board列表，其值为BOARDHEIGHT数量的None</span>
</code></pre>
<h3 id="4-5-ai-">4.5 AI获取最佳移动算法</h3>
<p>简单介绍一下蒙特卡洛搜索树的思想：</p>
<p>利用一维中的掷点法完成对围棋盘面的评估。具体来讲,当我们给定某一个棋盘局面时,程序在当前局面的所有可下点中随机选择一个点摆上棋子,并不断重复这个随机选择可下点(掷点)的过程,直到双方都没有可下点(即对弈结束),再把这个最终状态的胜负结果反馈回去,作为评估当前局面的依据。</p>
<p>在该实验当中AI通过不断选择不同的栏，然后考虑双方的获胜结果进行评估，AI最终会选择评估较高的策略。</p>
<p>在浏览下面图片和文字之前请先看一下后面的代码，然后在对应讲解内容。</p>
<p>观察下面图示中AI和player的对决</p>
<p><img src="./人机对战初体验_四子棋游戏 - 实验楼_files/wm(4)" alt="此处输入图片的描述"></p>
<p>实验中有些变量可以直观反映了AI棋子操作的过程：</p>
<p>PotentialMoves：返回一个列表，表示AI将棋子移动到列表中任一栏时获胜的可能性大小，其数值为-7~0的随机数，数值为负数时表示AI将棋子移动到这一栏时，玩家可能会在接下来两步取胜，数值越小表示玩家获胜可能性越大。为0，表示玩家不会获胜，并且AI也不可能获胜，为1表示AI可以获胜。</p>
<p>bestMoveFitness：适应度是选取PotentialMoves中最大的数值</p>
<p>bestMoves：如果PotentialMoves中有多个最大值，则表示AI将棋子移动到这些值所在的栏时，玩家获胜的几率都是最小的。所以将这些栏重新添加到列表bestMoves中。</p>
<p>column：当bestMoves为多个值时随机选择bestMoves中的一栏作为AI的移动。若是唯一值，则column为这个唯一值。</p>
<p>实验中通过打印这些 bestMoveFitness ,bestMoves , column ,potentialMoves得出在上图中AI的每一步参数：</p>
<h5 id="ai-moves-">AI moves:</h5>
<table>
<thead>
<tr>
<th style="text-align:left">steps</th>
<th style="text-align:right">potentialMoves</th>
<th style="text-align:center">bestMoveFitness</th>
<th>bestMoves</th>
<th>column</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:right">[0, 0, 0, 0, 0, 0, 0]</td>
<td style="text-align:center">0</td>
<td>[0, 1, 2, 3, 4, 5, 6]</td>
<td>0</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:right">[0, 0, 0, 0, 0, 0, 0]</td>
<td style="text-align:center">0</td>
<td>[0, 1, 2, 3, 4, 5, 6]</td>
<td>6</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:right">[-1, -1, -1, 0, -1, -1, -1]</td>
<td style="text-align:center">0</td>
<td>[3]</td>
<td>3</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:right">[-3, -2, 0, -3, -3, -2, -3]</td>
<td style="text-align:center">0</td>
<td>[2]</td>
<td>2</td>
</tr>
</tbody>
</table>
<p><img src="./人机对战初体验_四子棋游戏 - 实验楼_files/wm(5)" alt="此处输入图片的描述"></p>
<p>通过第三步AI的选择，更加细致地了解算法的原理：</p>
<p>下图是部分AI走法示意图，该图显示了如果AI将棋子落在第一格中，Player的可能选择，以及AI接下来的一步对player获胜产生的影响，正是通过这种搜索，迭代AI可以判定在接下来两步中对手和自己的获胜情况，从而做出抉择。</p>
<p><img src="./人机对战初体验_四子棋游戏 - 实验楼_files/wm(6)" alt="此处输入图片的描述"></p>
<p>下图是计算AI适应度值的流程图，实验中难度系数为2，需考虑7 ^ 4=2041次：
<img src="./人机对战初体验_四子棋游戏 - 实验楼_files/wm(7)" alt="此处输入图片的描述"></p>
<p>通过以上流程图，不难发现。AI的第一步棋子，若为0，1，2，4，5，6。则Player总有可能将剩下的两个棋子全部放在3，从而获胜。以AI=0为例，若player =0,即红色的第1枚棋子不在3，第2枚红色棋子不论在哪，都不可能获胜，为方便表述，用序列表示各种组合，序列第一个表是AI第一步，第二个数表示Player的回应，第三个数表示AI的回应。X表示任意有效移动。
所以[0,0,x]=0，推理得，当序列为[0,x&lt;&gt;3,x]，player都不能获胜。只有当player的第2枚棋子为3时，AI的第二枚在不为3的情况下都能获胜，所以[0,x=3,x&lt;&gt;3] =-1。共有6种情况。最终的结果为（0+0+…(43个)-1*6）/7 =-1
同理对于其他的四种，结果都为-1。当AI第一步就在3的话，Player就不可能获胜，并且AI也不能获胜，所以为0。AI会选择最高适应度值来走，即会在第3列落下棋子。</p>
<p>同理可以分析接下来AI的选择。归纳起来便是，如果AI的一步使得Player获胜的可能性越大，AI的适应度值越低，AI也选择适应度较高的，即按照阻止Player获胜的走法进行。当然，如果它自己能够获胜，它会优先将自己获胜的走法设置最高适应度。</p>
<pre><code class="lang-python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getPotentialMoves</span><span class="hljs-params">(board, tile, lookAhead)</span>:</span>
    <span class="hljs-keyword">if</span> lookAhead == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> isBoardFull(board):
    <span class="hljs-string">'''
    如果难度系数为0，或格子已满
    则返回列表值全为0,即此时
    适应度值和列的潜在移动值相等。
    此时AI将随机降落棋子，失去智能
    '''</span>
        <span class="hljs-keyword">return</span> [<span class="hljs-number">0</span>] * BOARDWIDTH

    <span class="hljs-comment">#确定对手棋子颜色</span>
    <span class="hljs-keyword">if</span> tile == RED:
        enemyTile = BLACK
    <span class="hljs-keyword">else</span>:
        enemyTile = RED
    potentialMoves = [<span class="hljs-number">0</span>] * BOARDWIDTH 
    <span class="hljs-comment">#初始一个潜在的移动列表，其数值全部为0</span>
    <span class="hljs-keyword">for</span> firstMove <span class="hljs-keyword">in</span> range(BOARDWIDTH):
        <span class="hljs-comment">#对每一栏进行遍历，将双方中的任一方的移动称为firstMove</span>
        <span class="hljs-comment">#则另外一方的移动就称为对手，counterMove。</span>
        <span class="hljs-comment">#这里我们的firstMove为AI，对手为玩家。 </span>
        dupeBoard = copy.deepcopy(board)
        <span class="hljs-comment">#这里用深复制是为了让board和dupeBoard不互相影响</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> isValidMove(dupeBoard, firstMove):
        <span class="hljs-comment">#如果在dupeBoard中黑色棋子移到firstMove栏无效</span>
            <span class="hljs-keyword">continue</span>                             
            <span class="hljs-comment">#则继续下一个firstMove</span>
        makeMove(dupeBoard, tile, firstMove)     
        <span class="hljs-comment">#如果是有效移动，则设置相应的格子颜色</span>
        <span class="hljs-keyword">if</span> isWinner(dupeBoard, tile):            
        <span class="hljs-comment">#如果获胜</span>

            potentialMoves[firstMove] = <span class="hljs-number">1</span>        
            <span class="hljs-comment">#获胜的棋子自动获得一个很高的数值来表示其获胜的几率</span>
            <span class="hljs-comment">#数值越大，获胜可能性越大，对手获胜可能性越小。</span>
            <span class="hljs-keyword">break</span>                                
            <span class="hljs-comment">#不要干扰计算其他的移动</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">if</span> isBoardFull(dupeBoard):           
            <span class="hljs-comment">#如果dupeBoard中没有空格</span>
                potentialMoves[firstMove] = <span class="hljs-number">0</span>    
                <span class="hljs-comment">#无法移动</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-keyword">for</span> counterMove <span class="hljs-keyword">in</span> range(BOARDWIDTH):
                <span class="hljs-comment">#考虑对手的移动</span>
                    dupeBoard2 = copy.deepcopy(dupeBoard)
                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> isValidMove(dupeBoard2, counterMove):
                        <span class="hljs-keyword">continue</span>
                    makeMove(dupeBoard2, enemyTile, counterMove)
                    <span class="hljs-keyword">if</span> isWinner(dupeBoard2, enemyTile):
                        potentialMoves[firstMove] = <span class="hljs-number">-1</span> 
                        <span class="hljs-comment">#如果玩家获胜，则AI的在此栏值最低</span>
                        <span class="hljs-keyword">break</span>
                    <span class="hljs-keyword">else</span>:
                        <span class="hljs-comment"># 递归调用getPotentialMoves</span>
                        results = getPotentialMoves(dupeBoard2, tile, lookAhead - <span class="hljs-number">1</span>)
                        potentialMoves[firstMove] += (sum(results) / BOARDWIDTH) / BOARDWIDTH
    <span class="hljs-keyword">return</span> potentialMoves
</code></pre>
<h3 id="4-6-">4.6 玩家操作</h3>
<p>拖拽棋子，判断棋子所在位置的格子，验证棋子的有效性，调用棋子下落函数，完成操作。</p>
<pre><code class="lang-python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getHumanMove</span><span class="hljs-params">(board, isFirstMove)</span>:</span>
    draggingToken = <span class="hljs-keyword">False</span>
    tokenx, tokeny = <span class="hljs-keyword">None</span>, <span class="hljs-keyword">None</span>
    <span class="hljs-keyword">while</span> <span class="hljs-keyword">True</span>:
        <span class="hljs-comment"># pygame.event.get()来处理所有的事件</span>
        <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get(): 
            <span class="hljs-keyword">if</span> event.type == QUIT:<span class="hljs-comment">#停止，退出</span>
                pygame.quit()
                sys.exit()
            <span class="hljs-keyword">elif</span> event.type == MOUSEBUTTONDOWN <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> draggingToken <span class="hljs-keyword">and</span> REDPILERECT.collidepoint(event.pos):
            <span class="hljs-comment">#如果事件类型为鼠标按下，notdraggingToken为True，鼠标点击的位置在REDPILERECT里面</span>
                draggingToken = <span class="hljs-keyword">True</span>
                tokenx, tokeny = event.pos
            <span class="hljs-keyword">elif</span> event.type == MOUSEMOTION <span class="hljs-keyword">and</span> draggingToken:<span class="hljs-comment">#如果开始拖动了红色棋子</span>

                tokenx, tokeny = event.pos <span class="hljs-comment">#更新被拖拽的棋子的位置</span>
            <span class="hljs-keyword">elif</span> event.type == MOUSEBUTTONUP <span class="hljs-keyword">and</span> draggingToken:
            <span class="hljs-comment">#如果鼠标松开，并且棋子被拖拽</span>

                <span class="hljs-comment">#如果棋子被拖拽在board的正上方</span>
                <span class="hljs-keyword">if</span> tokeny &lt; YMARGIN <span class="hljs-keyword">and</span> tokenx &gt; XMARGIN <span class="hljs-keyword">and</span> tokenx &lt; WINDOWWIDTH - XMARGIN:
                    column = int((tokenx - XMARGIN) / SPACESIZE)<span class="hljs-comment">#根据棋子的x坐标确定棋子会落的列（0,1...6)</span>
                    <span class="hljs-keyword">if</span> isValidMove(board, column):<span class="hljs-comment">#如果棋子移动有效</span>
                        <span class="hljs-string">"""
                        掉落在相应的空格子中，
                        这里只是显示一个掉落的效果
                        不用这个函数也能通过下面的代码实现棋子填充空格
                        """</span>
                        animateDroppingToken(board, column, RED)

                        <span class="hljs-comment">#将空格中最下面的格子设为红色</span>
                        board[column][getLowestEmptySpace(board, column)] = RED
                        drawBoard(board)<span class="hljs-comment">#在落入的格子中画红色棋子</span>
                        pygame.display.update()<span class="hljs-comment">#窗口更新</span>
                        <span class="hljs-keyword">return</span>
                tokenx, tokeny = <span class="hljs-keyword">None</span>, <span class="hljs-keyword">None</span>
                draggingToken = <span class="hljs-keyword">False</span>
        <span class="hljs-keyword">if</span> tokenx != <span class="hljs-keyword">None</span> <span class="hljs-keyword">and</span> tokeny != <span class="hljs-keyword">None</span>:<span class="hljs-comment">#如果拖动了棋子,则显示拖动的棋子</span>
            drawBoard(board, {<span class="hljs-string">'x'</span>:tokenx - int(SPACESIZE / <span class="hljs-number">2</span>), <span class="hljs-string">'y'</span>:tokeny - int(SPACESIZE / <span class="hljs-number">2</span>), <span class="hljs-string">'color'</span>:RED})
    <span class="hljs-comment">#并且通过调整x,y的坐标使拖动时，鼠标始终位于棋子的中心位置。</span>
        <span class="hljs-keyword">else</span>:
            drawBoard(board)<span class="hljs-comment">#当为无效移动时，鼠标松开后，因为此时board中所有格子的值均为none</span>
    <span class="hljs-comment">#调用drawBoard时，进行的操作是显示下面的两个棋子，相当于棋子回到到开始拖动的地方。</span>


        <span class="hljs-keyword">if</span> isFirstMove:

            DISPLAYSURF.blit(ARROWIMG, ARROWRECT)<span class="hljs-comment">#AI先走，显示提示操作图片</span>

        pygame.display.update()
        FPSCLOCK.tick()
</code></pre>
<h3 id="4-7-ai-">4.7 AI操作</h3>
<p>实现AI棋子自动移动并降落到相应位置的函数。</p>
<pre><code class="lang-python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">animateComputerMoving</span><span class="hljs-params">(board, column)</span>:</span>
    x = BLACKPILERECT.left<span class="hljs-comment">#下面黑色棋子的左坐标</span>
    y = BLACKPILERECT.top <span class="hljs-comment">#下面黑色棋子的上坐标</span>
    speed = <span class="hljs-number">1.0</span>
    <span class="hljs-keyword">while</span> y &gt; (YMARGIN - SPACESIZE):<span class="hljs-comment">#当y的值较大，即棋子位于窗口下方时</span>
        y -= int(speed)<span class="hljs-comment">#y不断减小，即棋子不断上移</span>
        speed += <span class="hljs-number">0.5</span><span class="hljs-comment">#减小的速度增加</span>
        drawBoard(board, {<span class="hljs-string">'x'</span>:x, <span class="hljs-string">'y'</span>:y, <span class="hljs-string">'color'</span>:BLACK})
        <span class="hljs-comment">#y不断变化，不断绘制红色棋子，形成不断上升的效果</span>
        pygame.display.update()
        FPSCLOCK.tick()
    <span class="hljs-comment">#当棋子上升到borad顶端时</span>
    y = YMARGIN - SPACESIZE<span class="hljs-comment">#y重新赋值，此时棋子的最下边和board的最上边相切</span>
    speed = <span class="hljs-number">1.0</span>
    <span class="hljs-keyword">while</span> x &gt; (XMARGIN + column * SPACESIZE):<span class="hljs-comment">#当x值大于需要移到的列的x坐标时</span>
        x -= int(speed)<span class="hljs-comment">#x值不断减小，即左移</span>
        speed += <span class="hljs-number">0.5</span>
        drawBoard(board, {<span class="hljs-string">'x'</span>:x, <span class="hljs-string">'y'</span>:y, <span class="hljs-string">'color'</span>:BLACK})
        <span class="hljs-comment">#此时y坐标已经不变，即从board上端向左平移到所在列。</span>
        pygame.display.update()
        FPSCLOCK.tick()
    <span class="hljs-comment">#黑色棋子降落到计算得到的空格</span>
    animateDroppingToken(board, column, BLACK)
</code></pre>
<p>通过返回的potentialMoves，选择其列表中最高的数字作为适应度值，并从这些适应度高栏中随机选择作为最后的移动目标。</p>
<pre><code class="lang-python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getComputerMove</span><span class="hljs-params">(board)</span>:</span>
    potentialMoves = getPotentialMoves(board, BLACK, DIFFICULTY)<span class="hljs-comment">#潜在的移动，是一个含BOARDWIDTH个值的列表。。</span>
    <span class="hljs-keyword">print</span> potentialMoves                                       <span class="hljs-comment">#列表值与设置的难度系数有关</span>
    bestMoves = []
    bestMoveFitness =max(potentialMoves) 
    <span class="hljs-keyword">print</span> bestMoveFitness                                                      <span class="hljs-comment">#建立bestMoves空列表</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(potentialMoves)):        
        <span class="hljs-keyword">if</span> potentialMoves[i] == bestMoveFitness <span class="hljs-keyword">and</span> isValidMove(board, i):
            bestMoves.append(i)  <span class="hljs-comment">#列出所有可以移动到的列，该列表可能为空，可能只有一个值，也可能有多个值    </span>
    <span class="hljs-keyword">print</span> bestMoves
    <span class="hljs-keyword">return</span> random.choice(bestMoves)<span class="hljs-comment">#从可以移动到的列中，随机选择一个作为移动到的目标</span>
</code></pre>
<h3 id="4-8-">4.8 棋子移动操作</h3>
<p>通过不断改变棋子的相应坐标，实现下落的动画效果。</p>
<pre><code class="lang-python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getLowestEmptySpace</span><span class="hljs-params">(board, column)</span>:</span>
    <span class="hljs-comment"># 返回最一列中最下面的空格</span>
    <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(BOARDHEIGHT<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>):
        <span class="hljs-keyword">if</span> board[column][y] == EMPTY:
            <span class="hljs-keyword">return</span> y
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">makeMove</span><span class="hljs-params">(board, player, column)</span>:</span>
    lowest = getLowestEmptySpace(board, column)<span class="hljs-comment">#返回一栏中</span>
    <span class="hljs-keyword">if</span> lowest != <span class="hljs-number">-1</span>:<span class="hljs-comment">#如果格子中的有空格</span>
        board[column][lowest] = player
        <span class="hljs-string">'''则将player(red/black)赋值给一栏中的最low的一个空格
           因为，棋子是落在一栏当中所有空格的最下面一个空格
           即认定这个格子中的颜色
        '''</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">animateDroppingToken</span><span class="hljs-params">(board, column, color)</span>:</span>
    x = XMARGIN + column * SPACESIZE <span class="hljs-comment">#x坐标</span>
    y = YMARGIN - SPACESIZE <span class="hljs-comment">#y坐标</span>
    dropSpeed = <span class="hljs-number">1.0</span><span class="hljs-comment">#棋子降落的速度</span>
    lowestEmptySpace = getLowestEmptySpace(board, column)<span class="hljs-comment">#一列的空格当中最下面的一个空格</span>

    <span class="hljs-keyword">while</span> <span class="hljs-keyword">True</span>:
        y += int(dropSpeed)<span class="hljs-comment">#y的坐标以dropSpeed叠加</span>
        dropSpeed += <span class="hljs-number">0.5</span><span class="hljs-comment">#dropSpeed也在加速，即棋子下落的加速度为0.5</span>
        <span class="hljs-keyword">if</span> int((y - YMARGIN) / SPACESIZE) &gt;= lowestEmptySpace:<span class="hljs-comment">#判断到达最下面的空格</span>
            <span class="hljs-keyword">return</span>
        drawBoard(board, {<span class="hljs-string">'x'</span>:x, <span class="hljs-string">'y'</span>:y, <span class="hljs-string">'color'</span>:color})<span class="hljs-comment">#y不断变化，不断绘制红色棋子，形成不断降落的效果</span>
        pygame.display.update()
        FPSCLOCK.tick()
</code></pre>
<h3 id="4-9-">4.9 一些判断函数</h3>
<p>判断棋子的移动是否有效，判断棋盘是否还有空格</p>
<pre><code class="lang-python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isValidMove</span><span class="hljs-params">(board, column)</span>:</span>
    <span class="hljs-comment">#判断棋子移动有效性</span>
    <span class="hljs-keyword">if</span> column &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> column &gt;= (BOARDWIDTH) <span class="hljs-keyword">or</span> board[column][<span class="hljs-number">0</span>] != EMPTY:
    <span class="hljs-comment">#如果列&lt;0,或&gt;BOARDWIDTH,或列中没有空格子</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">False</span>                                                     
        <span class="hljs-comment">#则为无效的移动，否则有效</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">True</span>


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isBoardFull</span><span class="hljs-params">(board)</span>:</span>
    <span class="hljs-comment">#如果格子中没有空余，则返回True</span>
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(BOARDWIDTH):
        <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(BOARDHEIGHT):
            <span class="hljs-keyword">if</span> board[x][y] == EMPTY:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">False</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">True</span>
</code></pre>
<h3 id="4-10-">4.10 获胜条件判断</h3>
<p>几张示意图方便了解，获胜的四种情况。图中所示是x，y取极值时所对应的位置。</p>
<p><img src="./人机对战初体验_四子棋游戏 - 实验楼_files/wm(8)" alt="此处输入图片的描述"></p>
<pre><code class="lang-python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isWinner</span><span class="hljs-params">(board, tile)</span>:</span>
    <span class="hljs-comment"># 检查水平方向棋子情况</span>
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(BOARDWIDTH - <span class="hljs-number">3</span>):<span class="hljs-comment">#x的取值为0,1,2,3</span>
        <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(BOARDHEIGHT):<span class="hljs-comment">#遍历所有行</span>
            <span class="hljs-comment">#如果x=0,则看第y行前4个棋子否都是相同的棋子，以此类推可以遍历所有的水平棋子四子相连情况.只要有一个x，y成立就可以判定获胜</span>
            <span class="hljs-keyword">if</span> board[x][y] == tile <span class="hljs-keyword">and</span> board[x+<span class="hljs-number">1</span>][y] == tile <span class="hljs-keyword">and</span> board[x+<span class="hljs-number">2</span>][y] == tile <span class="hljs-keyword">and</span> board[x+<span class="hljs-number">3</span>][y] == tile:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">True</span>

    <span class="hljs-comment"># 检查竖直方向棋子情况，与水平情况类似</span>
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(BOARDWIDTH):
        <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(BOARDHEIGHT - <span class="hljs-number">3</span>):
            <span class="hljs-keyword">if</span> board[x][y] == tile <span class="hljs-keyword">and</span> board[x][y+<span class="hljs-number">1</span>] == tile <span class="hljs-keyword">and</span> board[x][y+<span class="hljs-number">2</span>] == tile <span class="hljs-keyword">and</span> board[x][y+<span class="hljs-number">3</span>] == tile:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">True</span>

    <span class="hljs-comment"># 检查左倾斜方向棋子情况</span>
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(BOARDWIDTH - <span class="hljs-number">3</span>):<span class="hljs-comment">#x取值0,1,2,3</span>
        <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>, BOARDHEIGHT):<span class="hljs-comment">#因为左倾斜连成四子时，最坐下面的棋子至少为列中距离最上面四个格子，即y&gt;=3</span>
            <span class="hljs-keyword">if</span> board[x][y] == tile <span class="hljs-keyword">and</span> board[x+<span class="hljs-number">1</span>][y<span class="hljs-number">-1</span>] == tile <span class="hljs-keyword">and</span> board[x+<span class="hljs-number">2</span>][y<span class="hljs-number">-2</span>] == tile <span class="hljs-keyword">and</span> board[x+<span class="hljs-number">3</span>][y<span class="hljs-number">-3</span>] == tile:<span class="hljs-comment">#判定左倾斜四子同色</span>
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">True</span>

    <span class="hljs-comment"># 检查右倾斜方向棋子情况，与左倾斜类似</span>
    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(BOARDWIDTH - <span class="hljs-number">3</span>):
        <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(BOARDHEIGHT - <span class="hljs-number">3</span>):
            <span class="hljs-keyword">if</span> board[x][y] == tile <span class="hljs-keyword">and</span> board[x+<span class="hljs-number">1</span>][y+<span class="hljs-number">1</span>] == tile <span class="hljs-keyword">and</span> board[x+<span class="hljs-number">2</span>][y+<span class="hljs-number">2</span>] == tile <span class="hljs-keyword">and</span> board[x+<span class="hljs-number">3</span>][y+<span class="hljs-number">3</span>] == tile:
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">True</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">False</span>
</code></pre>
<h3 id="4-11-">4.11 程序运行</h3>
<pre><code class="lang-python hljs"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>:</span>
    isFirstGame = <span class="hljs-keyword">True</span> <span class="hljs-comment">#初始isFirstGame</span>

    <span class="hljs-keyword">while</span> <span class="hljs-keyword">True</span>: <span class="hljs-comment">#使游戏一直能够运行下去</span>
        runGame(isFirstGame)
        isFirstGame = <span class="hljs-keyword">False</span>


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">runGame</span><span class="hljs-params">(isFirstGame)</span>:</span>
    <span class="hljs-keyword">if</span> isFirstGame:
        <span class="hljs-comment"># 刚刚启动游戏第一局时</span>
        <span class="hljs-comment">#让AI先走第一步棋子，以便玩家可以观察到游戏是怎么玩的</span>
        turn = COMPUTER
        showHelp = <span class="hljs-keyword">True</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># 从第二剧开始，随机分配</span>
        <span class="hljs-keyword">if</span> random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>) == <span class="hljs-number">0</span>:
            turn = COMPUTER
        <span class="hljs-keyword">else</span>:
            turn = HUMAN
        showHelp = <span class="hljs-keyword">False</span>
</code></pre>
<h2 id="-">五、实验总结</h2>
<p>基于蒙特卡洛搜索树算法，利用Pygame模块使用Python代码实现了，人工自由选择棋子，AI通过算法智能跳到的人机大战效果。整个实验，让我们熟悉了pygame创建实例和移动的基础知识，也初步了解了蒙特卡洛算法的具体应用。</p>
<h2 id="-">六、参考资料</h2>
<blockquote>
<p><a href="http://www.mamicode.com/info-detail-1261189.html" target="_blank">http://www.mamicode.com/info-detail-1261189.html</a></p>
<p>蒙特卡洛搜索树介绍：<a href="http://jeffbradberry.com/posts/2015/09/intro-to-monte-carlo-tree-search/" target="_blank">http://jeffbradberry.com/posts/2015/09/intro-to-monte-carlo-tree-search/</a></p>
</blockquote>
</div>

<textarea id="editor" style="display:none;"># 人机对战初体验—四子棋游戏
继去年3月人机大战引发全球瞩目以来，围棋AI（人工智能）再度引发跨领域的关注：一个叫Master的围棋AI，几天时间，面对中日韩顶尖职业围棋选手，已取得60胜0败的恐怖战绩，展现出的围棋技艺已经到了人类理解不了的程度。这可以视为人工智能在围棋领域的一次“大征服”，而在此之外的意义则是，告诉了我们人工智能在征服一项领域或职业时，究竟速度有多快。理解这一点，对于人类，乃至每一个人，都非常重要。通过本实验的学习，可以对人机对战有初步了解。

## 一、实验介绍
### 1.1 实验内容
实验利用Python模拟AI和玩家进行四子棋游戏，利用游戏实验Pygame库，为游戏提供界面和操作支持。AI算法借用蒙特卡洛搜索树思想。通过设置AI的难度系数，即AI所能考虑到的未来棋子的可能走向，从而选择出最佳的方案和玩家对抗。难度系数越大，AI搜索范围越广，它所能做出的决定越明智。

游戏最终效果截图：






























![此处输入图片的描述](https://dn-anything-about-doc.qbox.me/document-uid18510labid2508timestamp1484216386343.png/wm)

### 1.2 实验知识点
+ Pygame的基础操作
+ 蒙特卡洛搜索树

### 1.3 实验环境
+ Python2.7
+ gedit


### 1.4 适合人群
本课程难度一般，属于初级课程，适合具有Python基础并对Pygame有所了解的用户学习。

### 1.5 代码获取
你可以通过下面命令将代码下载到实验楼环境中，作为参照对比进行学习。
```bash
$ wget http://labfile.oss.aliyuncs.com/courses/746/fourinrow.py
```

## 二、四子棋游戏
四子棋游戏是在7*6的格子中。轮流从格子最上方落下棋子。棋子会落在该列格子中最下面的空格子里。先将四个棋子连成一条线（水平直线，竖直直线，或倾斜直线）者获胜，游戏结束。

## 三、项目文件结构
![此处输入图片的描述](https://dn-anything-about-doc.qbox.me/document-uid18510labid2508timestamp1484214882250.png/wm)

## 四、实验步骤

### 4.1 开发准备
在Code目录下进行创建工程文件Fourinrow，在终端执行命令
```
cd Code &amp;&amp; mkdir Fourinrow
```

下载本次实验所需的图片资源到Fourinrow文件下

```xml
$ cd Fourinrow
$ wget http://labfile.oss.aliyuncs.com/courses/746/images.zip
$ unzip images.zip
```











![此处输入图片的描述](https://dn-anything-about-doc.qbox.me/document-uid18510labid2508timestamp1484214636741.png/wm)

安装依赖包
```  python
$ sudo apt-get update
$ sudo apt-get install python-pygame
```
### 4.2 游戏流程

![此处输入图片的描述](https://dn-anything-about-doc.qbox.me/document-uid268645labid2508timestamp1484208668352.png/wm)

### 4.3 初始化变量
用到的变量包括，棋盘的宽度，长度（可以修改，设计不同规格的棋盘），难度系数，棋子大小以及一些设计坐标变量的设定。



































在`FourinRow.py` 文件中输入如下代码：


```python
import random, copy, sys, pygame
from pygame.locals import *

BOARDWIDTH = 7  # 棋子盘的宽度栏数
BOARDHEIGHT = 6 # 棋子盘的高度栏数
assert BOARDWIDTH &gt;= 4 and BOARDHEIGHT &gt;= 4, 'Board must be at least 4x4.'

#python assert断言是声明其布尔值必须为真的判定，如果发生异常就说明表达示为假。
#可以理解assert断言语句为raise-if-not，用来测试表示式，其返回值为假，就会触发异常。

DIFFICULTY = 2 # 难度系数，计算机能够考虑的移动级别
               #这里2表示，考虑对手走棋的7种可能性及如何应对对手的7种走法

SPACESIZE = 50 # 棋子的大小

FPS = 30 # 屏幕的更新频率，即30/s
WINDOWWIDTH = 640  # 游戏屏幕的宽度像素
WINDOWHEIGHT = 480 # 游戏屏幕的高度像素

XMARGIN = int((WINDOWWIDTH - BOARDWIDTH * SPACESIZE) / 2)#X边缘坐标量，即格子栏的最左边
YMARGIN = int((WINDOWHEIGHT - BOARDHEIGHT * SPACESIZE) / 2)#Y边缘坐标量，即格子栏的最上边
BRIGHTBLUE = (0, 50, 255)#蓝色
WHITE = (255, 255, 255)#白色

BGCOLOR = BRIGHTBLUE
TEXTCOLOR = WHITE

RED = 'red'
BLACK = 'black'
EMPTY = None
HUMAN = 'human'
COMPUTER = 'computer'
```

除此之外我们还需要定义一些pygame的全局变量。这些全局变量在之后的各个模块中会被多次调用。其中很多是存储载入图片的变量，准备工作有点长，请大家耐心一点哦。

```python
#初始化pygame的各个模块
pygame.init()

#初始化了一个Clock对象
FPSCLOCK = pygame.time.Clock()

#创建游戏窗口
DISPLAYSURF = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))

#游戏窗口标题
pygame.display.set_caption(u'four in row')

#Rect(left,top,width,height)用来定义位置和宽高
REDPILERECT = pygame.Rect(int(SPACESIZE / 2), WINDOWHEIGHT - int(3 * SPACESIZE / 2), SPACESIZE, SPACESIZE)


#这里创建的是窗口中左下角和右下角的棋子
BLACKPILERECT = pygame.Rect(WINDOWWIDTH - int(3 * SPACESIZE / 2), WINDOWHEIGHT - int(3 * SPACESIZE / 2), SPACESIZE, SPACESIZE)

#载入红色棋子图片
REDTOKENIMG = pygame.image.load('4row_red.png')

#将红色棋子图片缩放为SPACESIZE
REDTOKENIMG = pygame.transform.smoothscale(REDTOKENIMG, (SPACESIZE, SPACESIZE))

#载入黑色棋子图片
BLACKTOKENIMG = pygame.image.load('4row_black.png')

#将黑色棋子图片缩放为SPACESIZE
BLACKTOKENIMG = pygame.transform.smoothscale(BLACKTOKENIMG, (SPACESIZE, SPACESIZE))

#载入棋子面板图片
BOARDIMG = pygame.image.load('4row_board.png')

#将棋子面板图片缩放为SPACESIZE
BOARDIMG = pygame.transform.smoothscale(BOARDIMG, (SPACESIZE, SPACESIZE))

#载入人胜利时图片
HUMANWINNERIMG = pygame.image.load('4row_humanwinner.png')

#载入AI胜时图片
COMPUTERWINNERIMG = pygame.image.load('4row_computerwinner.png')

#载入平局提示图片
TIEWINNERIMG = pygame.image.load('4row_tie.png')

#返回一个Rect实例
WINNERRECT = HUMANWINNERIMG.get_rect()

#游戏窗口中间位置坐标
WINNERRECT.center = (int(WINDOWWIDTH / 2), int(WINDOWHEIGHT / 2))

#载入操作提示图片
ARROWIMG = pygame.image.load('4row_arrow.png')

#返回一个Rect实例
ARROWRECT = ARROWIMG.get_rect()

#操作提示的左位置
ARROWRECT.left = REDPILERECT.right + 10 

#将操作提示与下方红色棋子实例在纵向对齐
ARROWRECT.centery = REDPILERECT.centery 
```
至此我们完成了前期的准备工作。


### 4.4 棋盘设计

初始时，将棋盘二维列表清空，然后根据玩家和AI的走法将棋盘相应位置设定颜色。

```python
def drawBoard(board, extraToken=None):
    #DISPLAYSURF 是我们的界面，在初始化变量模块中有定义
    DISPLAYSURF.fill(BGCOLOR)#将游戏窗口背景色填充为蓝色
    spaceRect = pygame.Rect(0, 0, SPACESIZE, SPACESIZE)#创建Rect实例
    for x in range(BOARDWIDTH):
        #确定每一列中每一行中的格子的左上角的位置坐标
        for y in range(BOARDHEIGHT):
            spaceRect.topleft = (XMARGIN + (x * SPACESIZE), YMARGIN + (y * SPACESIZE))
            
            #x =0,y =0时，即第一列第一行的格子。
            if board[x][y] == RED:#如果格子值为红色
                #则在在游戏窗口的spaceRect中画红色棋子
                DISPLAYSURF.blit(REDTOKENIMG, spaceRect)
            elif board[x][y] == BLACK: #否则画黑色棋子
                DISPLAYSURF.blit(BLACKTOKENIMG, spaceRect)
                
    # extraToken 是包含了位置信息和颜色信息的变量
    # 用来显示指定的棋子
    if extraToken != None:
        if extraToken['color'] == RED:
            DISPLAYSURF.blit(REDTOKENIMG,(extraToken['x'],
            extraToken['y'], SPACESIZE, SPACESIZE))
        elif extraToken['color'] == BLACK:
            DISPLAYSURF.blit(BLACKTOKENIMG, (extraToken['x'], extraToken['y'], SPACESIZE, SPACESIZE))

    # 画棋子面板
    for x in range(BOARDWIDTH):
        for y in range(BOARDHEIGHT):
            spaceRect.topleft = (XMARGIN + (x * SPACESIZE), YMARGIN + (y * SPACESIZE))
            DISPLAYSURF.blit(BOARDIMG, spaceRect)

    # 画游戏窗口中左下角和右下角的棋子
    DISPLAYSURF.blit(REDTOKENIMG, REDPILERECT) # 左边的红色棋子
    DISPLAYSURF.blit(BLACKTOKENIMG, BLACKPILERECT) # 右边的黑色棋子


def getNewBoard():
    board = []
    for x in range(BOARDWIDTH):
        board.append([EMPTY] * BOARDHEIGHT)
    return board #返回board列表，其值为BOARDHEIGHT数量的None
```

### 4.5 AI获取最佳移动算法

简单介绍一下蒙特卡洛搜索树的思想：

利用一维中的掷点法完成对围棋盘面的评估。具体来讲,当我们给定某一个棋盘局面时,程序在当前局面的所有可下点中随机选择一个点摆上棋子,并不断重复这个随机选择可下点(掷点)的过程,直到双方都没有可下点(即对弈结束),再把这个最终状态的胜负结果反馈回去,作为评估当前局面的依据。

在该实验当中AI通过不断选择不同的栏，然后考虑双方的获胜结果进行评估，AI最终会选择评估较高的策略。

在浏览下面图片和文字之前请先看一下后面的代码，然后在对应讲解内容。

观察下面图示中AI和player的对决

![此处输入图片的描述](https://dn-anything-about-doc.qbox.me/document-uid268645labid2508timestamp1484209088493.png/wm)

实验中有些变量可以直观反映了AI棋子操作的过程：

PotentialMoves：返回一个列表，表示AI将棋子移动到列表中任一栏时获胜的可能性大小，其数值为-7~0的随机数，数值为负数时表示AI将棋子移动到这一栏时，玩家可能会在接下来两步取胜，数值越小表示玩家获胜可能性越大。为0，表示玩家不会获胜，并且AI也不可能获胜，为1表示AI可以获胜。

bestMoveFitness：适应度是选取PotentialMoves中最大的数值

bestMoves：如果PotentialMoves中有多个最大值，则表示AI将棋子移动到这些值所在的栏时，玩家获胜的几率都是最小的。所以将这些栏重新添加到列表bestMoves中。

column：当bestMoves为多个值时随机选择bestMoves中的一栏作为AI的移动。若是唯一值，则column为这个唯一值。

实验中通过打印这些 bestMoveFitness ,bestMoves , column ,potentialMoves得出在上图中AI的每一步参数：


#####AI moves:
|steps| potentialMoves      |   bestMoveFitness | bestMoves  |column
| :-------- | --------:| :--: |
|1  |[0, 0, 0, 0, 0, 0, 0]    |  0   |[0, 1, 2, 3, 4, 5, 6]|0
|2     |  [0, 0, 0, 0, 0, 0, 0] | 0|  [0, 1, 2, 3, 4, 5, 6]|6
| 3     |  [-1, -1, -1, 0, -1, -1, -1] |0 |[3]|3
|4  |[-3, -2, 0, -3, -3, -2, -3]|0|[2]|2


![此处输入图片的描述](https://dn-anything-about-doc.qbox.me/document-uid268645labid2508timestamp1484209130294.png/wm)

通过第三步AI的选择，更加细致地了解算法的原理：

下图是部分AI走法示意图，该图显示了如果AI将棋子落在第一格中，Player的可能选择，以及AI接下来的一步对player获胜产生的影响，正是通过这种搜索，迭代AI可以判定在接下来两步中对手和自己的获胜情况，从而做出抉择。

![此处输入图片的描述](https://dn-anything-about-doc.qbox.me/document-uid268645labid2508timestamp1484209165865.png/wm)

下图是计算AI适应度值的流程图，实验中难度系数为2，需考虑7 ^ 4=2041次：
![此处输入图片的描述](https://dn-anything-about-doc.qbox.me/document-uid268645labid2508timestamp1484208902731.png/wm)





































































通过以上流程图，不难发现。AI的第一步棋子，若为0，1，2，4，5，6。则Player总有可能将剩下的两个棋子全部放在3，从而获胜。以AI=0为例，若player =0,即红色的第1枚棋子不在3，第2枚红色棋子不论在哪，都不可能获胜，为方便表述，用序列表示各种组合，序列第一个表是AI第一步，第二个数表示Player的回应，第三个数表示AI的回应。X表示任意有效移动。
所以[0,0,x]=0，推理得，当序列为[0,x&lt;&gt;3,x]，player都不能获胜。只有当player的第2枚棋子为3时，AI的第二枚在不为3的情况下都能获胜，所以[0,x=3,x&lt;&gt;3] =-1。共有6种情况。最终的结果为（0+0+…(43个)-1*6）/7 =-1
同理对于其他的四种，结果都为-1。当AI第一步就在3的话，Player就不可能获胜，并且AI也不能获胜，所以为0。AI会选择最高适应度值来走，即会在第3列落下棋子。

同理可以分析接下来AI的选择。归纳起来便是，如果AI的一步使得Player获胜的可能性越大，AI的适应度值越低，AI也选择适应度较高的，即按照阻止Player获胜的走法进行。当然，如果它自己能够获胜，它会优先将自己获胜的走法设置最高适应度。

```python
def getPotentialMoves(board, tile, lookAhead):
    if lookAhead == 0 or isBoardFull(board):
    '''
    如果难度系数为0，或格子已满
    则返回列表值全为0,即此时
    适应度值和列的潜在移动值相等。
    此时AI将随机降落棋子，失去智能
    '''
        return [0] * BOARDWIDTH
    
    #确定对手棋子颜色
    if tile == RED:
        enemyTile = BLACK
    else:
        enemyTile = RED
    potentialMoves = [0] * BOARDWIDTH 
    #初始一个潜在的移动列表，其数值全部为0
    for firstMove in range(BOARDWIDTH):
        #对每一栏进行遍历，将双方中的任一方的移动称为firstMove
        #则另外一方的移动就称为对手，counterMove。
        #这里我们的firstMove为AI，对手为玩家。 
        dupeBoard = copy.deepcopy(board)
        #这里用深复制是为了让board和dupeBoard不互相影响
        if not isValidMove(dupeBoard, firstMove):
        #如果在dupeBoard中黑色棋子移到firstMove栏无效
            continue                             
            #则继续下一个firstMove
        makeMove(dupeBoard, tile, firstMove)     
        #如果是有效移动，则设置相应的格子颜色
        if isWinner(dupeBoard, tile):            
        #如果获胜
           
            potentialMoves[firstMove] = 1        
            #获胜的棋子自动获得一个很高的数值来表示其获胜的几率
            #数值越大，获胜可能性越大，对手获胜可能性越小。
            break                                
            #不要干扰计算其他的移动
        else:
            if isBoardFull(dupeBoard):           
            #如果dupeBoard中没有空格
                potentialMoves[firstMove] = 0    
                #无法移动
            else:
                for counterMove in range(BOARDWIDTH):
                #考虑对手的移动
                    dupeBoard2 = copy.deepcopy(dupeBoard)
                    if not isValidMove(dupeBoard2, counterMove):
                        continue
                    makeMove(dupeBoard2, enemyTile, counterMove)
                    if isWinner(dupeBoard2, enemyTile):
                        potentialMoves[firstMove] = -1 
                        #如果玩家获胜，则AI的在此栏值最低
                        break
                    else:
                        # 递归调用getPotentialMoves
                        results = getPotentialMoves(dupeBoard2, tile, lookAhead - 1)
                        potentialMoves[firstMove] += (sum(results) / BOARDWIDTH) / BOARDWIDTH
    return potentialMoves
```

### 4.6 玩家操作

拖拽棋子，判断棋子所在位置的格子，验证棋子的有效性，调用棋子下落函数，完成操作。

```python
def getHumanMove(board, isFirstMove):
    draggingToken = False
    tokenx, tokeny = None, None
    while True:
        # pygame.event.get()来处理所有的事件
        for event in pygame.event.get(): 
            if event.type == QUIT:#停止，退出
                pygame.quit()
                sys.exit()
            elif event.type == MOUSEBUTTONDOWN and not draggingToken and REDPILERECT.collidepoint(event.pos):
            #如果事件类型为鼠标按下，notdraggingToken为True，鼠标点击的位置在REDPILERECT里面
                draggingToken = True
                tokenx, tokeny = event.pos
            elif event.type == MOUSEMOTION and draggingToken:#如果开始拖动了红色棋子

                tokenx, tokeny = event.pos #更新被拖拽的棋子的位置
            elif event.type == MOUSEBUTTONUP and draggingToken:
            #如果鼠标松开，并且棋子被拖拽
            
                #如果棋子被拖拽在board的正上方
                if tokeny &lt; YMARGIN and tokenx &gt; XMARGIN and tokenx &lt; WINDOWWIDTH - XMARGIN:
                    column = int((tokenx - XMARGIN) / SPACESIZE)#根据棋子的x坐标确定棋子会落的列（0,1...6)
                    if isValidMove(board, column):#如果棋子移动有效
                        """
                        掉落在相应的空格子中，
                        这里只是显示一个掉落的效果
                        不用这个函数也能通过下面的代码实现棋子填充空格
                        """
                        animateDroppingToken(board, column, RED)
                        
                        #将空格中最下面的格子设为红色
                        board[column][getLowestEmptySpace(board, column)] = RED
                        drawBoard(board)#在落入的格子中画红色棋子
                        pygame.display.update()#窗口更新
                        return
                tokenx, tokeny = None, None
                draggingToken = False
        if tokenx != None and tokeny != None:#如果拖动了棋子,则显示拖动的棋子
            drawBoard(board, {'x':tokenx - int(SPACESIZE / 2), 'y':tokeny - int(SPACESIZE / 2), 'color':RED})
    #并且通过调整x,y的坐标使拖动时，鼠标始终位于棋子的中心位置。
        else:
            drawBoard(board)#当为无效移动时，鼠标松开后，因为此时board中所有格子的值均为none
    #调用drawBoard时，进行的操作是显示下面的两个棋子，相当于棋子回到到开始拖动的地方。
                        
           
        if isFirstMove:

            DISPLAYSURF.blit(ARROWIMG, ARROWRECT)#AI先走，显示提示操作图片

        pygame.display.update()
        FPSCLOCK.tick()
```
###4.7 AI操作
实现AI棋子自动移动并降落到相应位置的函数。
```python
def animateComputerMoving(board, column):
    x = BLACKPILERECT.left#下面黑色棋子的左坐标
    y = BLACKPILERECT.top #下面黑色棋子的上坐标
    speed = 1.0
    while y &gt; (YMARGIN - SPACESIZE):#当y的值较大，即棋子位于窗口下方时
        y -= int(speed)#y不断减小，即棋子不断上移
        speed += 0.5#减小的速度增加
        drawBoard(board, {'x':x, 'y':y, 'color':BLACK})
        #y不断变化，不断绘制红色棋子，形成不断上升的效果
        pygame.display.update()
        FPSCLOCK.tick()
    #当棋子上升到borad顶端时
    y = YMARGIN - SPACESIZE#y重新赋值，此时棋子的最下边和board的最上边相切
    speed = 1.0
    while x &gt; (XMARGIN + column * SPACESIZE):#当x值大于需要移到的列的x坐标时
        x -= int(speed)#x值不断减小，即左移
        speed += 0.5
        drawBoard(board, {'x':x, 'y':y, 'color':BLACK})
        #此时y坐标已经不变，即从board上端向左平移到所在列。
        pygame.display.update()
        FPSCLOCK.tick()
    #黑色棋子降落到计算得到的空格
    animateDroppingToken(board, column, BLACK)
```
通过返回的potentialMoves，选择其列表中最高的数字作为适应度值，并从这些适应度高栏中随机选择作为最后的移动目标。
```python    
def getComputerMove(board):
    potentialMoves = getPotentialMoves(board, BLACK, DIFFICULTY)#潜在的移动，是一个含BOARDWIDTH个值的列表。。
    print potentialMoves                                       #列表值与设置的难度系数有关
    bestMoves = []
    bestMoveFitness =max(potentialMoves) 
    print bestMoveFitness                                                      #建立bestMoves空列表
    for i in range(len(potentialMoves)):        
        if potentialMoves[i] == bestMoveFitness and isValidMove(board, i):
            bestMoves.append(i)  #列出所有可以移动到的列，该列表可能为空，可能只有一个值，也可能有多个值    
    print bestMoves
    return random.choice(bestMoves)#从可以移动到的列中，随机选择一个作为移动到的目标
```

### 4.8 棋子移动操作
通过不断改变棋子的相应坐标，实现下落的动画效果。
```python
def getLowestEmptySpace(board, column):
    # 返回最一列中最下面的空格
    for y in range(BOARDHEIGHT-1, -1, -1):
        if board[column][y] == EMPTY:
            return y
    return -1
    
def makeMove(board, player, column):
    lowest = getLowestEmptySpace(board, column)#返回一栏中
    if lowest != -1:#如果格子中的有空格
        board[column][lowest] = player
        '''则将player(red/black)赋值给一栏中的最low的一个空格
           因为，棋子是落在一栏当中所有空格的最下面一个空格
           即认定这个格子中的颜色
        '''
        
def animateDroppingToken(board, column, color):
    x = XMARGIN + column * SPACESIZE #x坐标
    y = YMARGIN - SPACESIZE #y坐标
    dropSpeed = 1.0#棋子降落的速度
    lowestEmptySpace = getLowestEmptySpace(board, column)#一列的空格当中最下面的一个空格

    while True:
        y += int(dropSpeed)#y的坐标以dropSpeed叠加
        dropSpeed += 0.5#dropSpeed也在加速，即棋子下落的加速度为0.5
        if int((y - YMARGIN) / SPACESIZE) &gt;= lowestEmptySpace:#判断到达最下面的空格
            return
        drawBoard(board, {'x':x, 'y':y, 'color':color})#y不断变化，不断绘制红色棋子，形成不断降落的效果
        pygame.display.update()
        FPSCLOCK.tick()
```
### 4.9 一些判断函数
判断棋子的移动是否有效，判断棋盘是否还有空格
```python
def isValidMove(board, column):
    #判断棋子移动有效性
    if column &lt; 0 or column &gt;= (BOARDWIDTH) or board[column][0] != EMPTY:
    #如果列&lt;0,或&gt;BOARDWIDTH,或列中没有空格子
        return False                                                     
        #则为无效的移动，否则有效
    return True


def isBoardFull(board):
    #如果格子中没有空余，则返回True
    for x in range(BOARDWIDTH):
        for y in range(BOARDHEIGHT):
            if board[x][y] == EMPTY:
                return False
    return True
```
### 4.10 获胜条件判断

几张示意图方便了解，获胜的四种情况。图中所示是x，y取极值时所对应的位置。

![此处输入图片的描述](https://dn-anything-about-doc.qbox.me/document-uid18510labid2508timestamp1484648877064.png/wm)


```python
def isWinner(board, tile):
    # 检查水平方向棋子情况
    for x in range(BOARDWIDTH - 3):#x的取值为0,1,2,3
        for y in range(BOARDHEIGHT):#遍历所有行
            #如果x=0,则看第y行前4个棋子否都是相同的棋子，以此类推可以遍历所有的水平棋子四子相连情况.只要有一个x，y成立就可以判定获胜
            if board[x][y] == tile and board[x+1][y] == tile and board[x+2][y] == tile and board[x+3][y] == tile:
                return True
                
    # 检查竖直方向棋子情况，与水平情况类似
    for x in range(BOARDWIDTH):
        for y in range(BOARDHEIGHT - 3):
            if board[x][y] == tile and board[x][y+1] == tile and board[x][y+2] == tile and board[x][y+3] == tile:
                return True
                
    # 检查左倾斜方向棋子情况
    for x in range(BOARDWIDTH - 3):#x取值0,1,2,3
        for y in range(3, BOARDHEIGHT):#因为左倾斜连成四子时，最坐下面的棋子至少为列中距离最上面四个格子，即y&gt;=3
            if board[x][y] == tile and board[x+1][y-1] == tile and board[x+2][y-2] == tile and board[x+3][y-3] == tile:#判定左倾斜四子同色
                return True
                
    # 检查右倾斜方向棋子情况，与左倾斜类似
    for x in range(BOARDWIDTH - 3):
        for y in range(BOARDHEIGHT - 3):
            if board[x][y] == tile and board[x+1][y+1] == tile and board[x+2][y+2] == tile and board[x+3][y+3] == tile:
                return True
    return False
```
















### 4.11 程序运行

```python
def main():
    isFirstGame = True #初始isFirstGame

    while True: #使游戏一直能够运行下去
        runGame(isFirstGame)
        isFirstGame = False


def runGame(isFirstGame):
    if isFirstGame:
        # 刚刚启动游戏第一局时
        #让AI先走第一步棋子，以便玩家可以观察到游戏是怎么玩的
        turn = COMPUTER
        showHelp = True
    else:
        # 从第二剧开始，随机分配
        if random.randint(0, 1) == 0:
            turn = COMPUTER
        else:
            turn = HUMAN
        showHelp = False
```

## 五、实验总结
基于蒙特卡洛搜索树算法，利用Pygame模块使用Python代码实现了，人工自由选择棋子，AI通过算法智能跳到的人机大战效果。整个实验，让我们熟悉了pygame创建实例和移动的基础知识，也初步了解了蒙特卡洛算法的具体应用。

## 六、参考资料
&gt;http://www.mamicode.com/info-detail-1261189.html

&gt;蒙特卡洛搜索树介绍：http://jeffbradberry.com/posts/2015/09/intro-to-monte-carlo-tree-search/




</textarea>
<nav>
    <ul class="pager">
        
        
    </ul>
</nav>


    
    <div class="vip-banner">
        
        动手实践是学习 IT 技术最有效的方式！
        
        

        

        
            
        

        
        <a class="btn   lab-item-start" data-mobile-url="/courses/document/2508" data-url="/courses/start/2508" data-next="/courses/running">开始实验</a>
    </div>
    


        </div>
        <div class="col-md-3 layout-side">
            
    <div class="side-image side-image-pc">
        <img src="./人机对战初体验_四子棋游戏 - 实验楼_files/1484793020912.png">
    </div>
    
    

    
        
    


    
        
<div class="sidebox mooc-teacher">
    <div class="sidebox-header mooc-header">
        <h4 class="sidebox-title">课程教师</h4>
    </div>
    <div class="sidebox-body mooc-content">
        <a href="https://www.shiyanlou.com/user/268645/" target="_blank">
            <img src="./人机对战初体验_四子棋游戏 - 实验楼_files/gravatarN22E3Y8Q7JSN.jpg">
        </a>
        <div class="mooc-info">
            <div class="name"><strong>wsyzwn123</strong> </div>
            
            <div class="courses">共发布过<strong>1</strong>门课程</div>
        </div>
        <div class="mooc-extra-info">
            <div class="word long-paragraph">
                
            </div>
        </div>
    </div>
    <div class="sidebox-footer mooc-footer">
        <a href="https://www.shiyanlou.com/teacher/268645" target="_blank">查看老师的所有课程 &gt;</a>
    </div>
</div>

    
    
    
    
    <span class="btn side-btn" data-toggle="modal" id="askBtn" href="#askquestion" style="position: relative; top: 0px; width: 100%;">我要提问</span>
    
    
    
    
    

        </div>
    </div>
</div>


	<div class="modal fade" id="invite-user" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title">邀请好友，双方都可获赠实验豆！</h4>
				</div>
				<div class="modal-body">
                    
					<div class="form-label">
                        分享专属链接给好友，或粘贴到QQ群/微博/论坛，好友注册后，您和好友将分别获赠3个实验豆！
                    </div>
					<input type="text" id="bstext" class="form-invite" value="https://www.shiyanlou.com/register?inviter=NTY0MzE5MjQ4Mzk4">              
                    
					<div id="msg-modal"></div>
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="flash-message" tabindex="-1" role="dialog">
		<div class="modal-dialog" rolw="document">
		</div>
	</div>
	<div class="modal fade" id="modal-message" tabindex="-1" role="dialog" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title">注意</h4>
				</div>
				<div class="modal-body">
				</div>
				<div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary confirm" data-dismiss="modal">确定</button>
				</div>
			</div>
		</div>
	</div>
    

    
<div class="modal fade" id="start-newlab">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3>开始新实验</h3>
			</div>
			<div class="modal-body">
                <p>一个实验正在进行，是否停止它，开始新实验？</p>
			</div>
			<div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
                <a class="btn btn-primary start-newlab-confirm">确定</a>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div>
<div class="modal fade" id="start-evaluation-course">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3>开始评估课实验</h3>
			</div>
			<div class="modal-body">
                <div>
                    <p>为了让评估结果更加准确，请注意以下操作：</p>
                    <ul>
                        <li>完成实验后点击「停止实验」按钮</li>
                        <li>将代码提交到代码库</li>
                        <li>尽可能详尽的撰写实验报告</li>
                        <li>尽可能在实验操作的关键步骤截图</li>
                        <li>尽可能减少无用操作</li>
                        <li>尽可能高效的利用内存/CPU资源</li>
                    </ul>
                    <p>评估课还在不断完善中，我们真挚希望你能通过我们提供的这个平台，找到更好的发展机会。</p>
                </div>
                <br>
                <div class="start-newlab"></div>
			</div>
			<div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
                <a class="btn btn-primary start-confirm">确定</a>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div>
<div class="modal fade" id="vip-startlab-modal">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3>开始实验</h3>
			</div>
			<div class="modal-body">
                <div class="start-newlab"></div>
                <br>
                <div class="text-center vip-vm">
                    <a class="btn btn-default btn-lg newvm">创建新环境</a>
					
                </div>
                <br>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal-dialog -->
</div>

<div class="modal fade askquestion-modal" id="askquestion" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title">发帖</h4>
            </div>
            <div class="modal-body words-ctrl">
                <form class="form-horizontal" action="https://www.shiyanlou.com/questions/">
                    <input name="_csrf_token" type="hidden" value="1486875298##7a37fad5666c13ad934218d012dc25cce0a9689a">
                    <div class="form-group">
                        <label class="col-md-2 control-label">标题</label>
                        <div class="col-md-10">
                            <input type="text" name="title" min="5" max="100" class="form-control" placeholder="至少输入5个字" value="">
                            <span class="help-block"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label">描述</label>
                        <div class="col-md-10">
                            
                            
                            
<div class="tabpanel mkeditor">
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active">
            <a href="https://www.shiyanlou.com/courses/746/labs/2508/document#mkeditor-editor" role="tab" data-toggle="tab">编辑</a>
        </li>
        <li role="presentation">
            <a class="mkeditor-btn-view" href="https://www.shiyanlou.com/courses/746/labs/2508/document#mkeditor-viewer" role="tab" data-toggle="tab">预览</a>
        </li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active mkeditor-editor" id="mkeditor-editor" role="tabpanel">
            
            <div class="btn-group" role="group">
            
                <button type="button" class="btn btn-default mkeditor-btn-bold">
                    <i class="fa fa-bold"></i>
                </button>
                <button type="button" class="btn btn-default mkeditor-btn-italic">
                    <i class="fa fa-italic"></i>
                </button>
                <button type="button" class="btn btn-default mkeditor-btn-link">
                    <i class="fa fa-link"></i>
                </button>
                <button type="button" class="btn btn-default mkeditor-btn-quote">
                    <i class="fa fa-quote-left"></i>
                </button>
                <button type="button" class="btn btn-default mkeditor-btn-code">
                    <i class="fa fa-code"></i>
                </button>
                <button id="mkeditor-pickfile" type="button" class="btn btn-default mkeditor-btn-img">
                    <i class="fa fa-image"></i>
                </button>
                
                <button type="button" class="btn btn-default mkeditor-btn-listol">
                    <i class="fa fa-list-ol"></i>
                </button>
                <button type="button" class="btn btn-default mkeditor-btn-listul">
                    <i class="fa fa-list-ul"></i>
                </button>
            </div>
            <div class="btn-group pull-right" role="group">
                <a style="font-size:12px; color:#666; text-decoration:underline;" href="https://www.shiyanlou.com/questions/764" target="_blank">
                    <i class="fa fa-question-circle"></i>Markdown 语法
                </a>
            </div>
            <textarea name="content" class="content" min="0" max="20000" placeholder="推荐使用 Markdown 语法，至少输入 5 个字"></textarea>
            <div class="help-block"></div>
        </div>
        <div class="tab-pane mkeditor-viewer markdown-body" id="mkeditor-viewer" role="tabpanel">
            <div></div>
        </div>
    </div>
</div>

                        </div>
                    </div>
                    <div class="form-group" style="display:none;">
                        <label class="col-md-2 control-label">板块</label>
                        <div class="col-md-10">
                            <div class="q-types" data-type="">
                            </div>
                        </div>
                    </div>
                    
                    
                </form>
            </div>
            <div class="modal-footer">
                <a type="button" class="submit-question btn btn-primary" href="https://www.shiyanlou.com/vip" target="_blank" style="background:#FFFFFF;color:#00CC99;border:none;float:left;padding-left:0;"><img src="./人机对战初体验_四子棋游戏 - 实验楼_files/senior-vip-icon.png" alt=""> 加入高级会员获得助教答疑</a>
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="submit-question btn btn-primary">提交</button>
            </div>
        </div>
    </div>
</div>



	
		
			
		
	

    <div class="modal fade" id="sign-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <button type="button" class="close-modal" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
            <div class="modal-body">
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active">
                        <a href="https://www.shiyanlou.com/courses/746/labs/2508/document#signin-form" aria-controls="signin-form" role="tab" data-toggle="tab">登录</a>
                    </li>
                    <li role="presentation">
                        <a href="https://www.shiyanlou.com/courses/746/labs/2508/document#signup-form" aria-controls="signup-form" role="tab" data-toggle="tab">注册</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="signin-form">
                        <form action="https://www.shiyanlou.com/login" method="post">
                            <div class="form-group">
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-envelope" style="margin:0;"></i>
                                    </div>
                                    <input type="email" name="login" class="form-control" placeholder="请输入邮箱">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-lock" style="margin:0;"></i>
                                    </div>
                                    <input type="password" name="password" class="form-control" placeholder="请输入密码">
                                </div>
                            </div>
                            <div class="form-inline verify-code-item" style="display:none;">
                                <div class="form-group">
                                    <div class="input-group">
                                        <input type="text" name="captcha_v" class="form-control" placeholder="请输入验证码">
                                    </div>
                                </div>
                                <img class="verify-code" src="https://www.shiyanlou.com/courses/746/labs/2508/document" source="/captcha.gif">
                            </div>
                            <div class="form-group remember-login">
                                <input name="remember" type="checkbox" value="y"> 下次自动登录
                                <a class="pull-right" href="https://www.shiyanlou.com/reset_password">忘记密码？</a>
                            </div>
                            <div class="form-group">
                                <input class="btn btn-primary" name="submit" type="submit" value="进入实验楼">
                            </div>
                            <div class="form-group widget-signin">
                                <span>快速登录</span>
                                <a href="https://www.shiyanlou.com/auth/qq?next="><i class="fa fa-qq"></i></a>
                                <a href="https://www.shiyanlou.com/auth/weibo?next="><i class="fa fa-weibo"></i></a>
                                <a href="https://www.shiyanlou.com/auth/weixin?next="><i class="fa fa-weixin"></i></a>
                                <a href="https://www.shiyanlou.com/auth/github?next="><i class="fa fa-github"></i></a>
                                <a href="https://www.shiyanlou.com/auth/renren?next="><i class="fa fa-renren"></i></a>
                            </div>
                            <div class="form-group error-msg">
                                <div class="alert alert-danger" role="alert"></div>
                            </div>
                        </form>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="signup-form">
                        <form action="https://www.shiyanlou.com/register" method="post">
                            <div class="form-group">
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-envelope" style="margin:0;"></i>
                                    </div>
                                    <input type="email" name="email" class="form-control" placeholder="请输入邮箱">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-lock" style="margin:0;"></i>
                                    </div>
                                    <input type="password" name="password" class="form-control" placeholder="请输入密码">
                                </div>
                            </div>
                            <div class="form-inline">
                                <div class="form-group">
                                    <div class="input-group">
                                        <input type="text" name="captcha_v" class="form-control" placeholder="请输入验证码">
                                    </div>
                                </div>
                                <img class="verify-code" src="https://www.shiyanlou.com/courses/746/labs/2508/document" source="/captcha.gif">
                            </div>
                            <div class="form-group">
                                <input class="btn btn-primary" name="submit" type="submit" value="注册">
                            </div>
                            <div class="form-group agree-privacy">
                                注册表示您已经同意我们的<a href="https://www.shiyanlou.com/privacy" target="_blank">隐私条款</a>
                            </div>
                            <div class="form-group widget-signup">
                                <span>快速注册</span>
                                <a href="https://www.shiyanlou.com/auth/qq?next="><i class="fa fa-qq"></i></a>
                                <a href="https://www.shiyanlou.com/auth/weibo?next="><i class="fa fa-weibo"></i></a>
                                <a href="https://www.shiyanlou.com/auth/weixin?next="><i class="fa fa-weixin"></i></a>
                                <a href="https://www.shiyanlou.com/auth/github?next="><i class="fa fa-github"></i></a>
                                <a href="https://www.shiyanlou.com/auth/renren?next="><i class="fa fa-renren"></i></a>
                            </div>
                            <div class="form-group error-msg">
                                <div class="alert alert-danger" role="alert"></div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


    <div id="base-data" data-flash="false" data-is-login="true" data-jwt-token="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzaGl5YW5sb3U6d2ViOmFwcCIsInVuYW1lIjoid2h1aGFuMjAxMyIsInVpZCI6IjIzNTcyMyIsImV4cCI6MTQ4Njg3NTI5OCwiaWF0IjoxNDg2Nzg4ODk4fQ.JqPxrMu6qxTGzMtesptD2y7u08RETzWXUeLAKj6RBDo" data-user-id="235723" data-is-jwt="true" data-socket-url="wss://comet.shiyanlou.com" data-msg-user="" data-msg-system=""></div>

    <!-- 不带 CSS 的库 -->
    <script async="" src="./人机对战初体验_四子棋游戏 - 实验楼_files/analytics.js"></script><script src="./人机对战初体验_四子棋游戏 - 实验楼_files/polyfill.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/manifest.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/vendor.js"></script>

    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/jquery.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/jquery.form.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/jquery.qrcode.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/html2canvas.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/jspdf.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/ZeroClipboard.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/aliyun-oss-sdk-4.3.0.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/qiniu.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/plupload.full.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/echarts.min.js"></script>
    <!-- 不带 CSS 的库 end -->

    <!-- 带有 CSS 的库 -->
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/bootstrap.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/bootstrap-switch.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/bootstrap-tour.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/bootstrap-table.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/bootstrap-table-zh-CN.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/bootstrap-table-filter-control.min.js"></script>

    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/ace.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/video.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/katex.min.js"></script>
    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/highlight.min.js"></script>
    <!-- 带有 CSS 的库 end -->

    <script src="./人机对战初体验_四子棋游戏 - 实验楼_files/raven.min.js"></script>
    <script>
        Raven.config('https://bc3878b7ed0a4468a65390bd79e6e73f@sentry.shiyanlou.com/5', {
            release: '3.12.13'
        }).install();
    </script>

    
<div id="jinja-data" data-tencent-labid="[662]" data-course-detail="/courses/746" data-left-time="0" data-course-id="746" data-userlab-id="None" data-question-form="/questions/meta" data-start-newlab-url="/courses/clear"></div>
<script src="./人机对战初体验_四子棋游戏 - 实验楼_files/labDoc.js"></script><div style="display: none; position: fixed; top: 0px; left: 0px; right: 0px; bottom: 0px; background: rgba(0, 0, 0, 0.498039); text-align: center; z-index: 1600;"><i class="fa fa-spinner fa-pulse" style="margin-top: 240.8px; color: rgb(255, 255, 255); font-size: 35px;"></i></div>



	
        
            
            
<div class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-4 clearfix footer-col">
                <img src="./人机对战初体验_四子棋游戏 - 实验楼_files/logo_03.png">
                <div class="footer-slogan">动手做实验，轻松学编程</div>
                <div class="col-xs-2">
                    <div class="social-item footer-weixin-item">
                        <i class="fa fa-weixin"></i>
                        <div class="footer-weixin">
                            <img src="./人机对战初体验_四子棋游戏 - 实验楼_files/footer-weixin.png">
                        </div>
                    </div>
                </div>
                <div class="col-xs-2">
                    <div class="social-item footer-weibo-item">
                        <a href="http://weibo.com/shiyanlou2013" target="_blank">
                            <i class="fa fa-weibo"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-xs-6 col-sm-3 col-md-2 footer-col">
                <div class="col-title">公司</div>
                <a href="https://www.shiyanlou.com/aboutus" target="_blank">关于我们</a><br>
                <a href="https://www.shiyanlou.com/contact" target="_blank">联系我们</a><br>
                <a href="http://www.simplecloud.cn/jobs.html" target="_blank">加入我们</a><br>
                <a href="https://blog.shiyanlou.com/" target="_blank">技术博客</a><br>
            </div>
            <div class="col-xs-6 col-sm-3 col-md-2 footer-col">
                <div class="col-title">合作</div>
                <a href="https://www.shiyanlou.com/contribute" target="_blank">我要投稿</a><br>
                <a href="https://www.shiyanlou.com/labs" target="_blank">教师合作</a><br>
                <a href="https://www.shiyanlou.com/edu/" target="_blank">高校合作</a><br>
                <a href="https://www.shiyanlou.com/friends" target="_blank">友情链接</a>
            </div>
            <div class="col-xs-6 col-sm-3 col-md-2 footer-col">
                <div class="col-title">服务</div>
                <a href="https://www.shiyanlou.com/bootcamp/" target="_blank">实战训练营</a><br>
                <a href="https://www.shiyanlou.com/vip" target="_blank">会员服务</a><br>
                <a href="https://www.shiyanlou.com/courses/reports" target="_blank">实验报告</a><br>
                <a href="https://www.shiyanlou.com/questions/?tag=%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" target="_blank">常见问题</a><br>
                <a href="https://www.shiyanlou.com/privacy" target="_blank">隐私条款</a>
            </div>
            <div class="col-xs-6 col-sm-3 col-md-2 footer-col">
                <div class="col-title">学习路径</div>
                <a href="https://www.shiyanlou.com/paths/python" target="_blank">Python学习路径</a><br>
                <a href="https://www.shiyanlou.com/paths/linuxdev" target="_blank">Linux学习路径</a><br>
                <a href="https://www.shiyanlou.com/paths/bigdata" target="_blank">大数据学习路径</a><br>
                <a href="https://www.shiyanlou.com/paths/java" target="_blank">Java学习路径</a><br>
                <a href="https://www.shiyanlou.com/paths/php" target="_blank">PHP学习路径</a><br>
                <a href="https://www.shiyanlou.com/paths/" ,="" target="_blank">全部</a>
            </div>
        </div>
    </div>
    <div class="text-center copyright">
        <span>Copyright @2013-2016 实验楼在线教育</span>
        <span class="ver-line"> | </span>
        <a href="http://www.miibeian.gov.cn/" target="_blank">蜀ICP备13019762号</a>
        <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-89338452-1', 'auto');
        ga('send', 'pageview');
        </script>
    </div>
</div>

            
        
	


</body></html>